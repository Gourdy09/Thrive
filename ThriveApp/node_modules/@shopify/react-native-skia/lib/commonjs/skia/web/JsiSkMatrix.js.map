{"version":3,"names":["_types","require","_Host","_defineProperty","obj","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","t","i","_toPrimitive","String","r","e","Symbol","toPrimitive","call","TypeError","Number","isMatrixHostObject","Array","isArray","JsiSkMatrix","HostObject","constructor","CanvasKit","ref","preMultiply","matrix","set","Matrix","multiply","postMultiply","concat","fromValue","length","toMatrix3","translate","x","y","translated","postTranslate","scale","scaled","postScale","skew","skewed","postSkew","rotate","rotated","postRotate","identity","get","from","exports"],"sources":["JsiSkMatrix.ts"],"sourcesContent":["import type { CanvasKit, Matrix3x3 } from \"canvaskit-wasm\";\n\nimport { toMatrix3 } from \"../types\";\nimport type { SkMatrix, InputMatrix, Matrix4 } from \"../types\";\n\nimport { HostObject } from \"./Host\";\n\nconst isMatrixHostObject = (obj: InputMatrix): obj is SkMatrix =>\n  !Array.isArray(obj);\n\nexport class JsiSkMatrix\n  extends HostObject<Matrix3x3, \"Matrix\">\n  implements SkMatrix\n{\n  constructor(CanvasKit: CanvasKit, ref: Matrix3x3) {\n    super(CanvasKit, ref, \"Matrix\");\n  }\n\n  private preMultiply(matrix: number[]) {\n    this.ref.set(this.CanvasKit.Matrix.multiply(this.ref, matrix));\n  }\n\n  private postMultiply(matrix: number[]) {\n    this.ref.set(this.CanvasKit.Matrix.multiply(matrix, this.ref));\n  }\n\n  dispose = () => {\n    // Do nothing - the matrix is represenetd by a Float32Array\n  };\n\n  concat(matrix: InputMatrix) {\n    this.preMultiply(\n      // eslint-disable-next-line no-nested-ternary\n      isMatrixHostObject(matrix)\n        ? JsiSkMatrix.fromValue(matrix)\n        : matrix.length === 16\n        ? toMatrix3(matrix as Matrix4)\n        : [...matrix]\n    );\n    return this;\n  }\n\n  translate(x: number, y: number) {\n    this.preMultiply(this.CanvasKit.Matrix.translated(x, y));\n    return this;\n  }\n\n  postTranslate(x: number, y: number) {\n    this.postMultiply(this.CanvasKit.Matrix.translated(x, y));\n    return this;\n  }\n\n  scale(x: number, y?: number) {\n    this.preMultiply(this.CanvasKit.Matrix.scaled(x, y ?? x));\n    return this;\n  }\n\n  postScale(x: number, y?: number) {\n    this.postMultiply(this.CanvasKit.Matrix.scaled(x, y ?? x));\n    return this;\n  }\n\n  skew(x: number, y: number) {\n    this.preMultiply(this.CanvasKit.Matrix.skewed(x, y));\n    return this;\n  }\n\n  postSkew(x: number, y: number) {\n    this.postMultiply(this.CanvasKit.Matrix.skewed(x, y));\n    return this;\n  }\n\n  rotate(value: number) {\n    this.preMultiply(this.CanvasKit.Matrix.rotated(value));\n    return this;\n  }\n\n  postRotate(value: number) {\n    this.postMultiply(this.CanvasKit.Matrix.rotated(value));\n    return this;\n  }\n\n  identity() {\n    this.ref.set(this.CanvasKit.Matrix.identity());\n    return this;\n  }\n\n  get() {\n    return Array.from(this.ref);\n  }\n}\n"],"mappings":"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"}
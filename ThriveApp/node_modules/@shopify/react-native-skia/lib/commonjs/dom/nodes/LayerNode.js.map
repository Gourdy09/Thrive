{"version":3,"names":["_types","require","_RenderNode","_Node","LayerNode","JsiRenderNode","constructor","ctx","props","NodeType","Layer","renderNode","hasLayer","layer","children","JsiDeclarationNode","declCtx","declarationCtx","save","decorate","paint","paints","pop","restore","canvas","saveLayer","map","child","render","exports"],"sources":["LayerNode.ts"],"sourcesContent":["import type { DrawingContext } from \"../types\";\nimport { NodeType } from \"../types\";\nimport type { ChildrenProps } from \"../types/Common\";\n\nimport { JsiRenderNode } from \"./RenderNode\";\nimport type { NodeContext } from \"./Node\";\nimport { JsiDeclarationNode } from \"./Node\";\n\nexport class LayerNode extends JsiRenderNode<ChildrenProps> {\n  constructor(ctx: NodeContext, props: ChildrenProps) {\n    super(ctx, NodeType.Layer, props);\n  }\n\n  renderNode(ctx: DrawingContext): void {\n    let hasLayer = false;\n    const [layer, ...children] = this.children();\n    if (layer instanceof JsiDeclarationNode) {\n      const declCtx = ctx.declarationCtx;\n      declCtx.save();\n      layer.decorate(declCtx);\n      const paint = declCtx.paints.pop();\n      declCtx.restore();\n      if (paint) {\n        hasLayer = true;\n        ctx.canvas.saveLayer(paint);\n      }\n    }\n    children.map((child) => {\n      if (child instanceof JsiRenderNode) {\n        child.render(ctx);\n      }\n    });\n    if (hasLayer) {\n      ctx.canvas.restore();\n    }\n  }\n}\n"],"mappings":";;;;;;AACA,IAAAA,MAAA,GAAAC,OAAA;AAGA,IAAAC,WAAA,GAAAD,OAAA;AAEA,IAAAE,KAAA,GAAAF,OAAA;AAEO,MAAMG,SAAS,SAASC,yBAAa,CAAgB;EAC1DC,WAAWA,CAACC,GAAgB,EAAEC,KAAoB,EAAE;IAClD,KAAK,CAACD,GAAG,EAAEE,eAAQ,CAACC,KAAK,EAAEF,KAAK,CAAC;EACnC;EAEAG,UAAUA,CAACJ,GAAmB,EAAQ;IACpC,IAAIK,QAAQ,GAAG,KAAK;IACpB,MAAM,CAACC,KAAK,EAAE,GAAGC,QAAQ,CAAC,GAAG,IAAI,CAACA,QAAQ,CAAC,CAAC;IAC5C,IAAID,KAAK,YAAYE,wBAAkB,EAAE;MACvC,MAAMC,OAAO,GAAGT,GAAG,CAACU,cAAc;MAClCD,OAAO,CAACE,IAAI,CAAC,CAAC;MACdL,KAAK,CAACM,QAAQ,CAACH,OAAO,CAAC;MACvB,MAAMI,KAAK,GAAGJ,OAAO,CAACK,MAAM,CAACC,GAAG,CAAC,CAAC;MAClCN,OAAO,CAACO,OAAO,CAAC,CAAC;MACjB,IAAIH,KAAK,EAAE;QACTR,QAAQ,GAAG,IAAI;QACfL,GAAG,CAACiB,MAAM,CAACC,SAAS,CAACL,KAAK,CAAC;MAC7B;IACF;IACAN,QAAQ,CAACY,GAAG,CAAEC,KAAK,IAAK;MACtB,IAAIA,KAAK,YAAYtB,yBAAa,EAAE;QAClCsB,KAAK,CAACC,MAAM,CAACrB,GAAG,CAAC;MACnB;IACF,CAAC,CAAC;IACF,IAAIK,QAAQ,EAAE;MACZL,GAAG,CAACiB,MAAM,CAACD,OAAO,CAAC,CAAC;IACtB;EACF;AACF;AAACM,OAAA,CAAAzB,SAAA,GAAAA,SAAA"}
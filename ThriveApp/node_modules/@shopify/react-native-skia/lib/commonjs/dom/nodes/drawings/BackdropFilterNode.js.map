{"version":3,"names":["_types","require","_DrawingNode","_Node","BackdropFilterNode","JsiDrawingNode","constructor","ctx","props","NodeType","BackdropFilter","deriveProps","draw","canvas","declarationCtx","child","_children","imageFilter","JsiDeclarationNode","save","decorate","imgf","imageFilters","pop","cf","colorFilters","Skia","ImageFilter","MakeColorFilter","restore","saveLayer","undefined","exports"],"sources":["BackdropFilterNode.ts"],"sourcesContent":["import type { ChildrenProps, DrawingContext } from \"../../types\";\nimport { NodeType } from \"../../types\";\nimport { JsiDrawingNode } from \"../DrawingNode\";\nimport type { NodeContext } from \"../Node\";\nimport { JsiDeclarationNode } from \"../Node\";\nimport type { SkImageFilter } from \"../../../skia/types/ImageFilter/ImageFilter\";\n\nexport class BackdropFilterNode extends JsiDrawingNode<ChildrenProps, null> {\n  constructor(ctx: NodeContext, props: ChildrenProps) {\n    super(ctx, NodeType.BackdropFilter, props);\n  }\n\n  protected deriveProps() {\n    return null;\n  }\n\n  draw({ canvas, declarationCtx }: DrawingContext) {\n    const child = this._children[0];\n    let imageFilter: SkImageFilter | null = null;\n    if (child instanceof JsiDeclarationNode) {\n      declarationCtx.save();\n      child.decorate(declarationCtx);\n      const imgf = declarationCtx.imageFilters.pop();\n      if (imgf) {\n        imageFilter = imgf;\n      } else {\n        const cf = declarationCtx.colorFilters.pop();\n        if (cf) {\n          imageFilter = this.Skia.ImageFilter.MakeColorFilter(cf, null);\n        }\n      }\n      declarationCtx.restore();\n    }\n    canvas.saveLayer(undefined, null, imageFilter);\n    canvas.restore();\n  }\n}\n"],"mappings":";;;;;;AACA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AAEA,IAAAE,KAAA,GAAAF,OAAA;AAGO,MAAMG,kBAAkB,SAASC,2BAAc,CAAsB;EAC1EC,WAAWA,CAACC,GAAgB,EAAEC,KAAoB,EAAE;IAClD,KAAK,CAACD,GAAG,EAAEE,eAAQ,CAACC,cAAc,EAAEF,KAAK,CAAC;EAC5C;EAEUG,WAAWA,CAAA,EAAG;IACtB,OAAO,IAAI;EACb;EAEAC,IAAIA,CAAC;IAAEC,MAAM;IAAEC;EAA+B,CAAC,EAAE;IAC/C,MAAMC,KAAK,GAAG,IAAI,CAACC,SAAS,CAAC,CAAC,CAAC;IAC/B,IAAIC,WAAiC,GAAG,IAAI;IAC5C,IAAIF,KAAK,YAAYG,wBAAkB,EAAE;MACvCJ,cAAc,CAACK,IAAI,CAAC,CAAC;MACrBJ,KAAK,CAACK,QAAQ,CAACN,cAAc,CAAC;MAC9B,MAAMO,IAAI,GAAGP,cAAc,CAACQ,YAAY,CAACC,GAAG,CAAC,CAAC;MAC9C,IAAIF,IAAI,EAAE;QACRJ,WAAW,GAAGI,IAAI;MACpB,CAAC,MAAM;QACL,MAAMG,EAAE,GAAGV,cAAc,CAACW,YAAY,CAACF,GAAG,CAAC,CAAC;QAC5C,IAAIC,EAAE,EAAE;UACNP,WAAW,GAAG,IAAI,CAACS,IAAI,CAACC,WAAW,CAACC,eAAe,CAACJ,EAAE,EAAE,IAAI,CAAC;QAC/D;MACF;MACAV,cAAc,CAACe,OAAO,CAAC,CAAC;IAC1B;IACAhB,MAAM,CAACiB,SAAS,CAACC,SAAS,EAAE,IAAI,EAAEd,WAAW,CAAC;IAC9CJ,MAAM,CAACgB,OAAO,CAAC,CAAC;EAClB;AACF;AAACG,OAAA,CAAA5B,kBAAA,GAAAA,kBAAA"}
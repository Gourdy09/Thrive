{"version":3,"names":["_types","require","_NodeType","_Node","_datatypes","_DeclarationContext","BlendNode","JsiDeclarationNode","constructor","ctx","props","DeclarationType","ImageFilter","NodeType","Blend","decorate","decorateChildren","Skia","blend","BlendMode","enumKey","mode","imageFilters","popAll","length","composer","MakeBlend","bind","push","composeDeclarations","shaders","Shader","exports"],"sources":["BlendNode.ts"],"sourcesContent":["import type { BlendProps } from \"../../types/ImageFilters\";\nimport { BlendMode } from \"../../../skia/types\";\nimport { DeclarationType, NodeType } from \"../../types/NodeType\";\nimport type { NodeContext } from \"../Node\";\nimport { JsiDeclarationNode } from \"../Node\";\nimport { enumKey } from \"../datatypes\";\nimport type { DeclarationContext } from \"../../types/DeclarationContext\";\nimport { composeDeclarations } from \"../../types/DeclarationContext\";\n\nexport class BlendNode extends JsiDeclarationNode<BlendProps> {\n  constructor(ctx: NodeContext, props: BlendProps) {\n    super(ctx, DeclarationType.ImageFilter, NodeType.Blend, props);\n  }\n\n  decorate(ctx: DeclarationContext) {\n    this.decorateChildren(ctx);\n    const { Skia } = this;\n    const blend = BlendMode[enumKey(this.props.mode)];\n    // Blend ImageFilters\n    const imageFilters = ctx.imageFilters.popAll();\n    if (imageFilters.length > 0) {\n      const composer = Skia.ImageFilter.MakeBlend.bind(Skia.ImageFilter, blend);\n      ctx.imageFilters.push(composeDeclarations(imageFilters, composer));\n    }\n    // Blend Shaders\n    const shaders = ctx.shaders.popAll();\n    if (shaders.length > 0) {\n      const composer = Skia.Shader.MakeBlend.bind(Skia.Shader, blend);\n      ctx.shaders.push(composeDeclarations(shaders, composer));\n    }\n  }\n}\n"],"mappings":";;;;;;AACA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,SAAA,GAAAD,OAAA;AAEA,IAAAE,KAAA,GAAAF,OAAA;AACA,IAAAG,UAAA,GAAAH,OAAA;AAEA,IAAAI,mBAAA,GAAAJ,OAAA;AAEO,MAAMK,SAAS,SAASC,wBAAkB,CAAa;EAC5DC,WAAWA,CAACC,GAAgB,EAAEC,KAAiB,EAAE;IAC/C,KAAK,CAACD,GAAG,EAAEE,yBAAe,CAACC,WAAW,EAAEC,kBAAQ,CAACC,KAAK,EAAEJ,KAAK,CAAC;EAChE;EAEAK,QAAQA,CAACN,GAAuB,EAAE;IAChC,IAAI,CAACO,gBAAgB,CAACP,GAAG,CAAC;IAC1B,MAAM;MAAEQ;IAAK,CAAC,GAAG,IAAI;IACrB,MAAMC,KAAK,GAAGC,gBAAS,CAAC,IAAAC,kBAAO,EAAC,IAAI,CAACV,KAAK,CAACW,IAAI,CAAC,CAAC;IACjD;IACA,MAAMC,YAAY,GAAGb,GAAG,CAACa,YAAY,CAACC,MAAM,CAAC,CAAC;IAC9C,IAAID,YAAY,CAACE,MAAM,GAAG,CAAC,EAAE;MAC3B,MAAMC,QAAQ,GAAGR,IAAI,CAACL,WAAW,CAACc,SAAS,CAACC,IAAI,CAACV,IAAI,CAACL,WAAW,EAAEM,KAAK,CAAC;MACzET,GAAG,CAACa,YAAY,CAACM,IAAI,CAAC,IAAAC,uCAAmB,EAACP,YAAY,EAAEG,QAAQ,CAAC,CAAC;IACpE;IACA;IACA,MAAMK,OAAO,GAAGrB,GAAG,CAACqB,OAAO,CAACP,MAAM,CAAC,CAAC;IACpC,IAAIO,OAAO,CAACN,MAAM,GAAG,CAAC,EAAE;MACtB,MAAMC,QAAQ,GAAGR,IAAI,CAACc,MAAM,CAACL,SAAS,CAACC,IAAI,CAACV,IAAI,CAACc,MAAM,EAAEb,KAAK,CAAC;MAC/DT,GAAG,CAACqB,OAAO,CAACF,IAAI,CAAC,IAAAC,uCAAmB,EAACC,OAAO,EAAEL,QAAQ,CAAC,CAAC;IAC1D;EACF;AACF;AAACO,OAAA,CAAA1B,SAAA,GAAAA,SAAA"}
{"version":3,"names":["_types","require","_types2","_datatypes","_Node","PaintNode","JsiDeclarationNode","constructor","ctx","props","DeclarationType","Paint","NodeType","decorate","color","strokeWidth","blendMode","style","strokeJoin","strokeCap","strokeMiter","opacity","antiAlias","dither","paint","Skia","undefined","setColor","Color","setStrokeWidth","setBlendMode","BlendMode","enumKey","setStyle","PaintStyle","setStrokeJoin","StrokeJoin","setStrokeCap","StrokeCap","setStrokeMiter","setAlphaf","setAntiAlias","setDither","save","_children","forEach","child","colorFilter","colorFilters","popAllAsOne","imageFilter","imageFilters","shader","shaders","pop","maskFilter","maskFilters","pathEffect","pathEffects","restore","setImageFilter","setShader","setPathEffect","setColorFilter","setMaskFilter","paints","push","exports"],"sources":["PaintNode.ts"],"sourcesContent":["import { StrokeCap, StrokeJoin, PaintStyle, BlendMode } from \"../../skia/types\";\nimport type { DeclarationNode, PaintProps } from \"../types\";\nimport { DeclarationType, NodeType } from \"../types\";\nimport type { DeclarationContext } from \"../types/DeclarationContext\";\n\nimport { enumKey } from \"./datatypes\";\nimport type { NodeContext } from \"./Node\";\nimport { JsiDeclarationNode } from \"./Node\";\n\nexport class PaintNode\n  extends JsiDeclarationNode<PaintProps>\n  implements DeclarationNode<PaintProps>\n{\n  constructor(ctx: NodeContext, props: PaintProps = {}) {\n    super(ctx, DeclarationType.Paint, NodeType.Paint, props);\n  }\n\n  decorate(ctx: DeclarationContext) {\n    const {\n      color,\n      strokeWidth,\n      blendMode,\n      style,\n      strokeJoin,\n      strokeCap,\n      strokeMiter,\n      opacity,\n      antiAlias,\n      dither,\n    } = this.props;\n    const paint = this.Skia.Paint();\n    if (color !== undefined) {\n      paint.setColor(this.Skia.Color(color));\n    }\n    if (strokeWidth !== undefined) {\n      paint.setStrokeWidth(strokeWidth);\n    }\n    if (blendMode !== undefined) {\n      paint.setBlendMode(BlendMode[enumKey(blendMode)]);\n    }\n    if (style !== undefined) {\n      paint.setStyle(PaintStyle[enumKey(style)]);\n    }\n    if (strokeJoin !== undefined) {\n      paint.setStrokeJoin(StrokeJoin[enumKey(strokeJoin)]);\n    }\n    if (strokeCap !== undefined) {\n      paint.setStrokeCap(StrokeCap[enumKey(strokeCap)]);\n    }\n    if (strokeMiter !== undefined) {\n      paint.setStrokeMiter(strokeMiter);\n    }\n    if (opacity !== undefined) {\n      paint.setAlphaf(opacity);\n    }\n    if (antiAlias !== undefined) {\n      paint.setAntiAlias(antiAlias);\n    }\n    if (dither !== undefined) {\n      paint.setDither(dither);\n    }\n    ctx.save();\n    this._children.forEach((child) => {\n      if (child instanceof JsiDeclarationNode) {\n        child.decorate(ctx);\n      }\n    });\n    const colorFilter = ctx.colorFilters.popAllAsOne();\n    const imageFilter = ctx.imageFilters.popAllAsOne();\n    const shader = ctx.shaders.pop();\n    const maskFilter = ctx.maskFilters.pop();\n    const pathEffect = ctx.pathEffects.popAllAsOne();\n    ctx.restore();\n    if (imageFilter) {\n      paint.setImageFilter(imageFilter);\n    }\n    if (shader) {\n      paint.setShader(shader);\n    }\n    if (pathEffect) {\n      paint.setPathEffect(pathEffect);\n    }\n    if (colorFilter) {\n      paint.setColorFilter(colorFilter);\n    }\n    if (maskFilter) {\n      paint.setMaskFilter(maskFilter);\n    }\n    ctx.paints.push(paint);\n  }\n}\n"],"mappings":"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"}
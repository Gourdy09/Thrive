{"version":3,"names":["NodeType","JsiDrawingNode","JsiDeclarationNode","BackdropFilterNode","constructor","ctx","props","BackdropFilter","deriveProps","draw","canvas","declarationCtx","child","_children","imageFilter","save","decorate","imgf","imageFilters","pop","cf","colorFilters","Skia","ImageFilter","MakeColorFilter","restore","saveLayer","undefined"],"sources":["BackdropFilterNode.ts"],"sourcesContent":["import type { ChildrenProps, DrawingContext } from \"../../types\";\nimport { NodeType } from \"../../types\";\nimport { JsiDrawingNode } from \"../DrawingNode\";\nimport type { NodeContext } from \"../Node\";\nimport { JsiDeclarationNode } from \"../Node\";\nimport type { SkImageFilter } from \"../../../skia/types/ImageFilter/ImageFilter\";\n\nexport class BackdropFilterNode extends JsiDrawingNode<ChildrenProps, null> {\n  constructor(ctx: NodeContext, props: ChildrenProps) {\n    super(ctx, NodeType.BackdropFilter, props);\n  }\n\n  protected deriveProps() {\n    return null;\n  }\n\n  draw({ canvas, declarationCtx }: DrawingContext) {\n    const child = this._children[0];\n    let imageFilter: SkImageFilter | null = null;\n    if (child instanceof JsiDeclarationNode) {\n      declarationCtx.save();\n      child.decorate(declarationCtx);\n      const imgf = declarationCtx.imageFilters.pop();\n      if (imgf) {\n        imageFilter = imgf;\n      } else {\n        const cf = declarationCtx.colorFilters.pop();\n        if (cf) {\n          imageFilter = this.Skia.ImageFilter.MakeColorFilter(cf, null);\n        }\n      }\n      declarationCtx.restore();\n    }\n    canvas.saveLayer(undefined, null, imageFilter);\n    canvas.restore();\n  }\n}\n"],"mappings":"AACA,SAASA,QAAQ,QAAQ,aAAa;AACtC,SAASC,cAAc,QAAQ,gBAAgB;AAE/C,SAASC,kBAAkB,QAAQ,SAAS;AAG5C,OAAO,MAAMC,kBAAkB,SAASF,cAAc,CAAsB;EAC1EG,WAAWA,CAACC,GAAgB,EAAEC,KAAoB,EAAE;IAClD,KAAK,CAACD,GAAG,EAAEL,QAAQ,CAACO,cAAc,EAAED,KAAK,CAAC;EAC5C;EAEUE,WAAWA,CAAA,EAAG;IACtB,OAAO,IAAI;EACb;EAEAC,IAAIA,CAAC;IAAEC,MAAM;IAAEC;EAA+B,CAAC,EAAE;IAC/C,MAAMC,KAAK,GAAG,IAAI,CAACC,SAAS,CAAC,CAAC,CAAC;IAC/B,IAAIC,WAAiC,GAAG,IAAI;IAC5C,IAAIF,KAAK,YAAYV,kBAAkB,EAAE;MACvCS,cAAc,CAACI,IAAI,CAAC,CAAC;MACrBH,KAAK,CAACI,QAAQ,CAACL,cAAc,CAAC;MAC9B,MAAMM,IAAI,GAAGN,cAAc,CAACO,YAAY,CAACC,GAAG,CAAC,CAAC;MAC9C,IAAIF,IAAI,EAAE;QACRH,WAAW,GAAGG,IAAI;MACpB,CAAC,MAAM;QACL,MAAMG,EAAE,GAAGT,cAAc,CAACU,YAAY,CAACF,GAAG,CAAC,CAAC;QAC5C,IAAIC,EAAE,EAAE;UACNN,WAAW,GAAG,IAAI,CAACQ,IAAI,CAACC,WAAW,CAACC,eAAe,CAACJ,EAAE,EAAE,IAAI,CAAC;QAC/D;MACF;MACAT,cAAc,CAACc,OAAO,CAAC,CAAC;IAC1B;IACAf,MAAM,CAACgB,SAAS,CAACC,SAAS,EAAE,IAAI,EAAEb,WAAW,CAAC;IAC9CJ,MAAM,CAACe,OAAO,CAAC,CAAC;EAClB;AACF"}
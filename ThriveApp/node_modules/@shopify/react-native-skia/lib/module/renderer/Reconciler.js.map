{"version":3,"names":["ReactReconciler","skHostConfig","debug","hostDebug","Container","skiaReconciler","injectIntoDevTools","bundleType","version","rendererPackageName","SkiaRoot","constructor","Skia","native","redraw","getNativeId","_defineProperty","container","root","createContainer","console","error","render","element","updateContainer","unmount","dom"],"sources":["Reconciler.tsx"],"sourcesContent":["import type { ReactNode } from \"react\";\nimport type { OpaqueRoot } from \"react-reconciler\";\nimport ReactReconciler from \"react-reconciler\";\n\nimport type { Skia } from \"../skia/types\";\n\nimport { skHostConfig, debug as hostDebug } from \"./HostConfig\";\nimport { Container } from \"./Container\";\n\nconst skiaReconciler = ReactReconciler(skHostConfig);\n\nskiaReconciler.injectIntoDevTools({\n  bundleType: 1,\n  version: \"0.0.1\",\n  rendererPackageName: \"react-native-skia\",\n});\n\nexport class SkiaRoot {\n  private root: OpaqueRoot;\n  private container: Container;\n\n  constructor(\n    Skia: Skia,\n    native = false,\n    redraw: () => void = () => {},\n    getNativeId: () => number = () => 0\n  ) {\n    this.container = new Container(Skia, redraw, getNativeId, native);\n    this.root = skiaReconciler.createContainer(\n      this.container,\n      0,\n      null,\n      true,\n      null,\n      \"\",\n      console.error,\n      null\n    );\n  }\n\n  render(element: ReactNode) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    skiaReconciler.updateContainer(element as any, this.root, null, () => {\n      hostDebug(\"updateContainer\");\n    });\n  }\n\n  unmount() {\n    skiaReconciler.updateContainer(null, this.root, null, () => {\n      hostDebug(\"unmountContainer\");\n    });\n  }\n\n  get dom() {\n    return this.container.root;\n  }\n}\n"],"mappings":";;;AAEA,OAAOA,eAAe,MAAM,kBAAkB;AAI9C,SAASC,YAAY,EAAEC,KAAK,IAAIC,SAAS,QAAQ,cAAc;AAC/D,SAASC,SAAS,QAAQ,aAAa;AAEvC,MAAMC,cAAc,GAAGL,eAAe,CAACC,YAAY,CAAC;AAEpDI,cAAc,CAACC,kBAAkB,CAAC;EAChCC,UAAU,EAAE,CAAC;EACbC,OAAO,EAAE,OAAO;EAChBC,mBAAmB,EAAE;AACvB,CAAC,CAAC;AAEF,OAAO,MAAMC,QAAQ,CAAC;EAIpBC,WAAWA,CACTC,IAAU,EACVC,MAAM,GAAG,KAAK,EACdC,MAAkB,GAAGA,CAAA,KAAM,CAAC,CAAC,EAC7BC,WAAyB,GAAGA,CAAA,KAAM,CAAC,EACnC;IAAAC,eAAA;IAAAA,eAAA;IACA,IAAI,CAACC,SAAS,GAAG,IAAIb,SAAS,CAACQ,IAAI,EAAEE,MAAM,EAAEC,WAAW,EAAEF,MAAM,CAAC;IACjE,IAAI,CAACK,IAAI,GAAGb,cAAc,CAACc,eAAe,CACxC,IAAI,CAACF,SAAS,EACd,CAAC,EACD,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,EAAE,EACFG,OAAO,CAACC,KAAK,EACb,IACF,CAAC;EACH;EAEAC,MAAMA,CAACC,OAAkB,EAAE;IACzB;IACAlB,cAAc,CAACmB,eAAe,CAACD,OAAO,EAAS,IAAI,CAACL,IAAI,EAAE,IAAI,EAAE,MAAM;MACpEf,SAAS,CAAC,iBAAiB,CAAC;IAC9B,CAAC,CAAC;EACJ;EAEAsB,OAAOA,CAAA,EAAG;IACRpB,cAAc,CAACmB,eAAe,CAAC,IAAI,EAAE,IAAI,CAACN,IAAI,EAAE,IAAI,EAAE,MAAM;MAC1Df,SAAS,CAAC,kBAAkB,CAAC;IAC/B,CAAC,CAAC;EACJ;EAEA,IAAIuB,GAAGA,CAAA,EAAG;IACR,OAAO,IAAI,CAACT,SAAS,CAACC,IAAI;EAC5B;AACF"}
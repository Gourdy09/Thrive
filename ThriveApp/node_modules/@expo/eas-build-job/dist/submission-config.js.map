{"version":3,"file":"submission-config.js","sourceRoot":"","sources":["../src/submission-config.ts"],"names":[],"mappings":";;;AAAA,6BAAwB;AAExB,0DAA0D;AAC1D,IAAiB,gBAAgB,CAyEhC;AAzED,WAAiB,gBAAgB;IAI/B,IAAiB,GAAG,CAgCnB;IAhCD,WAAiB,GAAG;QACL,WAAO,GAAG,OAAC;aACrB,MAAM,CAAC;YACN;;eAEG;YACH,gBAAgB,EAAE,OAAC,CAAC,MAAM,EAAE;YAC5B,wBAAwB,EAAE,OAAC,CAAC,OAAO,EAAE,CAAC,QAAQ,EAAE;SACjD,CAAC;aACD,GAAG,CACF,OAAC,CAAC,KAAK,CAAC;YACN,OAAC,CAAC,MAAM,CAAC;gBACP,qGAAqG;gBACrG,eAAe,EAAE,OAAC,CAAC,MAAM,EAAE;gBAC3B,wBAAwB,EAAE,OAAC,CAAC,MAAM,EAAE;gBACpC,aAAa,EAAE,OAAC,CAAC,KAAK,EAAE,CAAC,QAAQ,EAAE;aACpC,CAAC;YACF,OAAC,CAAC,MAAM,CAAC;gBACP;;;;;;;mBAOG;gBACH,aAAa,EAAE,OAAC,CAAC,MAAM,EAAE;gBACzB,eAAe,EAAE,OAAC,CAAC,KAAK,EAAE,CAAC,QAAQ,EAAE;gBACrC,wBAAwB,EAAE,OAAC,CAAC,KAAK,EAAE,CAAC,QAAQ,EAAE;aAC/C,CAAC;SACH,CAAC,CACH,CAAC;IACN,CAAC,EAhCgB,GAAG,GAAH,oBAAG,KAAH,oBAAG,QAgCnB;IAED,IAAiB,OAAO,CAkCvB;IAlCD,WAAiB,OAAO;QACtB,IAAY,aAKX;QALD,WAAY,aAAa;YACvB,wCAAuB,CAAA;YACvB,gCAAe,CAAA;YACf,kCAAiB,CAAA;YACjB,2CAA0B,CAAA;QAC5B,CAAC,EALW,aAAa,GAAb,qBAAa,KAAb,qBAAa,QAKxB;QAED,IAAY,YAKX;QALD,WAAY,YAAY;YACtB,yCAAyB,CAAA;YACzB,6BAAa,CAAA;YACb,+BAAe,CAAA;YACf,qCAAqB,CAAA;QACvB,CAAC,EALW,YAAY,GAAZ,oBAAY,KAAZ,oBAAY,QAKvB;QAEY,eAAO,GAAG,OAAC;aACrB,MAAM,CAAC;YACN,KAAK,EAAE,OAAC,CAAC,UAAU,CAAC,YAAY,CAAC;YACjC,uBAAuB,EAAE,OAAC,CAAC,OAAO,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC;YACnD,2BAA2B,EAAE,OAAC,CAAC,MAAM,EAAE;YACvC,wBAAwB,EAAE,OAAC,CAAC,OAAO,EAAE,CAAC,QAAQ,EAAE;SACjD,CAAC;aACD,GAAG,CACF,OAAC,CAAC,KAAK,CAAC;YACN,OAAC,CAAC,MAAM,CAAC;gBACP,aAAa,EAAE,OAAC,CAAC,OAAO,CAAC,aAAa,CAAC,WAAW,CAAC;gBACnD,OAAO,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;aAC7C,CAAC;YACF,OAAC,CAAC,MAAM,CAAC;gBACP,aAAa,EAAE,OAAC,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC,QAAQ,EAAE;gBACrD,OAAO,EAAE,OAAC,CAAC,KAAK,EAAE,CAAC,QAAQ,EAAE;aAC9B,CAAC;SACH,CAAC,CACH,CAAC;IACN,CAAC,EAlCgB,OAAO,GAAP,wBAAO,KAAP,wBAAO,QAkCvB;AACH,CAAC,EAzEgB,gBAAgB,gCAAhB,gBAAgB,QAyEhC","sourcesContent":["import { z } from 'zod';\n\n/** Submission config as used by the submission worker. */\nexport namespace SubmissionConfig {\n  export type Ios = z.infer<typeof Ios.SchemaZ>;\n  export type Android = z.infer<typeof Android.SchemaZ>;\n\n  export namespace Ios {\n    export const SchemaZ = z\n      .object({\n        /**\n         * App Store Connect unique App ID\n         */\n        ascAppIdentifier: z.string(),\n        isVerboseFastlaneEnabled: z.boolean().optional(),\n      })\n      .and(\n        z.union([\n          z.object({\n            // The `appleIdUsername` & `appleAppSpecificPassword` pair is mutually exclusive with `ascApiJsonKey`\n            appleIdUsername: z.string(),\n            appleAppSpecificPassword: z.string(),\n            ascApiJsonKey: z.never().optional(),\n          }),\n          z.object({\n            /**\n             * ASC API JSON token example:\n             * {\n             *  key_id: \"D383SF739\",\n             *  issuer_id: \"6053b7fe-68a8-4acb-89be-165aa6465141\",\n             *  key: \"-----BEGIN PRIVATE KEY-----\\nMIGTAgEAMBMGByqGSM\\n-----END PRIVATE KEY--\"\n             * }\n             */\n            ascApiJsonKey: z.string(),\n            appleIdUsername: z.never().optional(),\n            appleAppSpecificPassword: z.never().optional(),\n          }),\n        ])\n      );\n  }\n\n  export namespace Android {\n    export enum ReleaseStatus {\n      COMPLETED = 'completed',\n      DRAFT = 'draft',\n      HALTED = 'halted',\n      IN_PROGRESS = 'inProgress',\n    }\n\n    export enum ReleaseTrack {\n      PRODUCTION = 'production',\n      BETA = 'beta',\n      ALPHA = 'alpha',\n      INTERNAL = 'internal',\n    }\n\n    export const SchemaZ = z\n      .object({\n        track: z.nativeEnum(ReleaseTrack),\n        changesNotSentForReview: z.boolean().default(false),\n        googleServiceAccountKeyJson: z.string(),\n        isVerboseFastlaneEnabled: z.boolean().optional(),\n      })\n      .and(\n        z.union([\n          z.object({\n            releaseStatus: z.literal(ReleaseStatus.IN_PROGRESS),\n            rollout: z.number().gte(0).lte(1).default(1),\n          }),\n          z.object({\n            releaseStatus: z.nativeEnum(ReleaseStatus).optional(),\n            rollout: z.never().optional(),\n          }),\n        ])\n      );\n  }\n}\n"]}
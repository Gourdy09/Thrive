import { bunyan } from '@expo/logger';
import { BuildStepGlobalContext, SerializedBuildStepGlobalContext } from './BuildStepContext.js';
export declare enum BuildStepInputValueTypeName {
    STRING = "string",
    BOOLEAN = "boolean",
    NUMBER = "number",
    JSON = "json"
}
export type BuildStepInputValueType<T extends BuildStepInputValueTypeName = BuildStepInputValueTypeName> = T extends BuildStepInputValueTypeName.STRING ? string : T extends BuildStepInputValueTypeName.BOOLEAN ? boolean : T extends BuildStepInputValueTypeName.NUMBER ? number : Record<string, any>;
export type BuildStepInputValueTypeWithRequired<T extends BuildStepInputValueTypeName = BuildStepInputValueTypeName, R extends boolean = boolean> = R extends true ? BuildStepInputValueType<T> : BuildStepInputValueType<T> | undefined;
export type BuildStepInputById = Record<string, BuildStepInput>;
export type BuildStepInputProvider = (ctx: BuildStepGlobalContext, stepId: string) => BuildStepInput;
interface BuildStepInputProviderParams<T extends BuildStepInputValueTypeName = BuildStepInputValueTypeName, R extends boolean = boolean> {
    id: string;
    allowedValues?: BuildStepInputValueType<T>[];
    defaultValue?: BuildStepInputValueType<T>;
    required: R;
    allowedValueTypeName: T;
}
interface BuildStepInputParams<T extends BuildStepInputValueTypeName, R extends boolean> extends BuildStepInputProviderParams<T, R> {
    stepDisplayName: string;
}
export interface SerializedBuildStepInput<T extends BuildStepInputValueTypeName = BuildStepInputValueTypeName, R extends boolean = boolean> {
    id: string;
    stepDisplayName: string;
    defaultValue?: BuildStepInputValueType<T>;
    allowedValues?: BuildStepInputValueType<T>[];
    allowedValueTypeName: BuildStepInputValueTypeName;
    required: R;
    value?: BuildStepInputValueType<T>;
    ctx: SerializedBuildStepGlobalContext;
}
export declare class BuildStepInput<T extends BuildStepInputValueTypeName = BuildStepInputValueTypeName, R extends boolean = boolean> {
    private readonly ctx;
    readonly id: string;
    readonly stepDisplayName: string;
    readonly defaultValue?: BuildStepInputValueType<T>;
    readonly allowedValues?: BuildStepInputValueType<T>[];
    readonly allowedValueTypeName: T;
    readonly required: R;
    private _value?;
    static createProvider(params: BuildStepInputProviderParams): BuildStepInputProvider;
    constructor(ctx: BuildStepGlobalContext, { id, stepDisplayName, allowedValues, defaultValue, required, allowedValueTypeName, }: BuildStepInputParams<T, R>);
    get value(): BuildStepInputValueTypeWithRequired<T, R>;
    get rawValue(): BuildStepInputValueType<T> | undefined;
    set(value: BuildStepInputValueType<T> | undefined): BuildStepInput;
    isValueOneOfAllowedValues(): boolean;
    isRawValueStepOrContextReference(): boolean;
    serialize(): SerializedBuildStepInput<T, R>;
    static deserialize(serializedInput: SerializedBuildStepInput, logger: bunyan): BuildStepInput;
    private parseInputValueToAllowedType;
    private parseInputValueToString;
    private parseInputValueToNumber;
    private parseInputValueToBoolean;
    private parseInputValueToObject;
}
export declare function makeBuildStepInputByIdMap(inputs?: BuildStepInput[]): BuildStepInputById;
export {};
